d3.slider=function module(){var j=0,m=100,d=0.01,b=true,c="horizontal",e=false,i=50,o,h=1,g;var l,k=d3.dispatch("slide","slideend"),n=d3.format(".2%"),f=d3.format(".0"),p;function a(q){q.each(function(){if(!g){g=d3.scale.linear().domain([j,m])}o=o||g.domain()[0];var r=d3.select(this).classed("d3-slider d3-slider-"+c,true);var v=d3.behavior.drag();v.on("dragend",function(){k.slideend(d3.event,o)});var D,C=null,x;if(o.length==2){D=r.append("a").classed("d3-slider-handle",true).attr("xlink:href","#").attr("id","handle-one").on("click",A).call(v);C=r.append("a").classed("d3-slider-handle",true).attr("id","handle-two").attr("xlink:href","#").on("click",A).call(v)}else{D=r.append("a").classed("d3-slider-handle",true).attr("xlink:href","#").attr("id","handle-one").on("click",A).call(v)}if(c==="horizontal"){r.on("click",F);if(o.length==2){x=d3.select(this).append("div").classed("d3-slider-range",true);D.style("left",n(g(o[0])));x.style("left",n(g(o[0])));v.on("drag",u);var s=100-parseFloat(n(g(o[1])));C.style("left",n(g(o[1])));x.style("right",s+"%");v.on("drag",u)}else{D.style("left",n(g(o)));v.on("drag",u)}p=parseInt(r.style("width"),10)}else{r.on("click",y);v.on("drag",w);if(o.length==2){x=d3.select(this).append("div").classed("d3-slider-range-vertical",true);D.style("bottom",n(g(o[0])));x.style("bottom",n(g(o[0])));v.on("drag",w);var B=100-parseFloat(n(g(o[1])));C.style("bottom",n(g(o[1])));x.style("top",B+"%");v.on("drag",w)}else{D.style("bottom",n(g(o)));v.on("drag",w)}p=parseInt(r.style("height"),10)}if(e){E(r)}function E(I){if(typeof e==="boolean"){e=d3.svg.axis().ticks(Math.round(p/100)).tickFormat(f).orient((c==="horizontal")?"bottom":"right")}l=g.copy().range([0,p]);e.scale(l);var G=I.append("svg").classed("d3-slider-axis d3-slider-axis-"+e.orient(),true).on("click",A);var H=G.append("g");if(c==="horizontal"){G.style("left",-i+"px");G.attr({width:p+i*2,height:i});if(e.orient()==="top"){G.style("top",-i+"px");H.attr("transform","translate("+i+","+i+")")}else{H.attr("transform","translate("+i+",0)")}}else{G.style("top",-i+"px");G.attr({width:i,height:p+i*2});if(e.orient()==="left"){G.style("left",-i+"px");H.attr("transform","translate("+i+","+i+")")}else{H.attr("transform","translate("+0+","+i+")")}}H.call(e)}function t(N){var M=z(g.invert(N/p)),K=o.length?o[h-1]:o;if(K!==M){var H=n(g(z(K))),I=n(g(z(M))),G=(c==="horizontal")?"left":"bottom";if(o.length===2){o[h-1]=M;k.slide(d3.event,o)}else{k.slide(d3.event.sourceEvent||d3.event,o=M)}if(o[0]>=o[1]){return}if(h===1){if(o.length===2){(G==="left")?x.style("left",I):x.style("bottom",I)}if(b){D.transition().styleTween(G,function(){return d3.interpolate(H,I)}).duration((typeof b==="number")?b:250)}else{D.style(G,I)}}else{var J=100-parseFloat(I);var L=100-parseFloat(I);(G==="left")?x.style("right",J+"%"):x.style("top",L+"%");if(b){C.transition().styleTween(G,function(){return d3.interpolate(H,I)}).duration((typeof b==="number")?b:250)}else{C.style(G,I)}}}}function z(I){if(I===g.domain()[0]||I===g.domain()[1]){return I}var H=(I-g.domain()[0])%d,G=I-H;if(Math.abs(H)*2>=d){G+=(H>0)?d:-d}return G}function F(){if(!o.length){t(d3.event.offsetX||d3.event.layerX)}}function y(){if(!o.length){t(p-d3.event.offsetY||d3.event.layerY)}}function u(){if(d3.event.sourceEvent.target.id==="handle-one"){h=1}else{if(d3.event.sourceEvent.target.id=="handle-two"){h=2}}t(Math.max(0,Math.min(p,d3.event.x)))}function w(){if(d3.event.sourceEvent.target.id==="handle-one"){h=1}else{if(d3.event.sourceEvent.target.id=="handle-two"){h=2}}t(p-Math.max(0,Math.min(p,d3.event.y)))}function A(){d3.event.stopPropagation()}})}a.min=function(q){if(!arguments.length){return j}j=q;return a};a.max=function(q){if(!arguments.length){return m}m=q;return a};a.step=function(q){if(!arguments.length){return d}d=q;return a};a.animate=function(q){if(!arguments.length){return b}b=q;return a};a.orientation=function(q){if(!arguments.length){return c}c=q;return a};a.axis=function(q){if(!arguments.length){return e}e=q;return a};a.margin=function(q){if(!arguments.length){return i}i=q;return a};a.value=function(q){if(!arguments.length){return o}o=q;return a};a.scale=function(q){if(!arguments.length){return g}g=q;return a};d3.rebind(a,k,"on");return a};